exports.id=830,exports.ids=[830],exports.modules={12539:(a,b,c)=>{Promise.resolve().then(c.bind(c,29125))},13580:(a,b,c)=>{"use strict";c.d(b,{default:()=>w});var d=c(21124),e=c(3991),f=c.n(e),g=c(42378),h=c(9956),i=c(77850),j=c(65893),k=c(72567),l=c(83276),m=c(14343),n=c(44688),o=c(46422),p=c(43700),q=c(94684),r=c(47089),s=c(6130),t=c(19710),u=c(38301);let v=[{href:"/dashboard",icon:i.A,label:"Dashboard"},{href:"/members",icon:j.A,label:"Members"},{href:"/schedule",icon:k.A,label:"Schedule"},{href:"/kiosk",icon:l.A,label:"Kiosk Mode"},{href:"/billing",icon:m.A,label:"Billing"},{href:"/assistant",icon:n.A,label:"AI Assistant"},{href:"/automations",icon:o.A,label:"Automations"},{href:"/migration",icon:p.A,label:"Migration"},{href:"/settings",icon:q.A,label:"Settings"}];function w({user:a}){let b=(0,g.usePathname)(),[c,e]=(0,u.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>e(!c),className:"lg:hidden fixed top-4 left-4 z-50 bg-white shadow-lg rounded-xl p-3",children:c?(0,d.jsx)(r.A,{className:"w-5 h-5"}):(0,d.jsx)(s.A,{className:"w-5 h-5"})}),c&&(0,d.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>e(!1)}),(0,d.jsxs)("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-40
          w-64 bg-slate-900 text-white
          transform transition-transform duration-300 ease-in-out
          ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          flex flex-col
        `,children:[(0,d.jsxs)("div",{className:"p-6 border-b border-slate-800",children:[(0,d.jsx)("h1",{className:"text-xl font-bold",children:"Flow State BJJ"}),(0,d.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"Member Management"})]}),(0,d.jsx)("nav",{className:"flex-1 py-4 overflow-y-auto",children:v.map(a=>{let c=b===a.href||b.startsWith(a.href+"/");return(0,d.jsxs)(f(),{href:a.href,onClick:()=>e(!1),className:`
                  flex items-center px-6 py-3 text-sm font-medium transition-colors
                  ${c?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"}
                `,children:[(0,d.jsx)(a.icon,{className:"w-5 h-5 mr-3"}),a.label]},a.href)})}),(0,d.jsxs)("div",{className:"p-4 border-t border-slate-800",children:[(0,d.jsxs)("div",{className:"flex items-center mb-4",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:a.name?.[0]||a.email?.[0]?.toUpperCase()||"A"}),(0,d.jsxs)("div",{className:"ml-3 overflow-hidden",children:[(0,d.jsx)("p",{className:"text-sm font-medium truncate",children:a.name||"Admin"}),(0,d.jsx)("p",{className:"text-xs text-slate-400 truncate",children:a.email})]})]}),(0,d.jsxs)("button",{onClick:()=>(0,h.CI)({callbackUrl:"/login"}),className:"w-full flex items-center justify-center px-4 py-2 text-sm text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:[(0,d.jsx)(t.A,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>g,viewport:()=>h});var d=c(75338),e=c(31288),f=c.n(e);c(82704);let g={title:"Flow State BJJ | Member Management",description:"Member management system for Flow State BJJ Academy in Chelsea Heights",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"Flow State"}},h={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover",themeColor:"#1e293b"};function i({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().className} antialiased`,children:a})})}},27297:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},29125:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/dawidnaude/Github Projects/Flow State Member Management/components/Sidebar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/dawidnaude/Github Projects/Flow State Member Management/components/Sidebar.tsx","default")},35387:()=>{},36993:(a,b,c)=>{"use strict";c.r(b),c.d(b,{attendance:()=>t,attendanceRelations:()=>z,automationLogs:()=>v,beltRankEnum:()=>m,classes:()=>s,memberNotes:()=>w,memberNotesRelations:()=>B,members:()=>r,membersRelations:()=>y,membershipStatusEnum:()=>n,paymentStatusEnum:()=>p,payments:()=>u,paymentsRelations:()=>A,programTypeEnum:()=>o,settings:()=>x,users:()=>q});var d=c(75947),e=c(96441),f=c(29205),g=c(29745),h=c(62352),i=c(84266),j=c(14880),k=c(4396),l=c(98445);let m=(0,d.rL)("belt_rank",["white","blue","purple","brown","black"]),n=(0,d.rL)("membership_status",["active","pending","overdue","inactive","trial","cancelled"]),o=(0,d.rL)("program_type",["adults_gi","adults_nogi","youth_gi","youth_nogi","open_mat","women_only","kids"]),p=(0,d.rL)("payment_status",["pending","completed","failed","refunded"]),q=(0,e.cJ)("users",{id:(0,f.uR)("id").defaultRandom().primaryKey(),email:(0,g.Qq)("email").notNull().unique(),passwordHash:(0,g.Qq)("password_hash"),name:(0,g.Qq)("name"),role:(0,g.Qq)("role").default("admin"),createdAt:(0,h.vE)("created_at").defaultNow(),updatedAt:(0,h.vE)("updated_at").defaultNow()}),r=(0,e.cJ)("members",{id:(0,f.uR)("id").defaultRandom().primaryKey(),firstName:(0,g.Qq)("first_name").notNull(),lastName:(0,g.Qq)("last_name").notNull(),email:(0,g.Qq)("email"),phone:(0,g.Qq)("phone"),dateOfBirth:(0,h.vE)("date_of_birth"),emergencyContact:(0,g.Qq)("emergency_contact"),emergencyPhone:(0,g.Qq)("emergency_phone"),beltRank:m("belt_rank").default("white"),stripes:(0,i.nd)("stripes").default(0),status:n("status").default("trial"),programs:(0,j.Pq)("programs").$type().default([]),joinDate:(0,h.vE)("join_date").defaultNow(),lastCheckIn:(0,h.vE)("last_check_in"),attendanceCount:(0,i.nd)("attendance_count").default(0),profileImage:(0,g.Qq)("profile_image"),faceEmbedding:(0,j.Pq)("face_embedding").$type(),notes:(0,g.Qq)("notes"),ezipayCustomerId:(0,g.Qq)("ezipay_customer_id"),subscriptionId:(0,g.Qq)("subscription_id"),subscriptionPlan:(0,g.Qq)("subscription_plan"),billingStatus:(0,g.Qq)("billing_status"),lastPaymentDate:(0,h.vE)("last_payment_date"),nextPaymentDate:(0,h.vE)("next_payment_date"),clubworxId:(0,g.Qq)("clubworx_id"),createdAt:(0,h.vE)("created_at").defaultNow(),updatedAt:(0,h.vE)("updated_at").defaultNow()}),s=(0,e.cJ)("classes",{id:(0,f.uR)("id").defaultRandom().primaryKey(),name:(0,g.Qq)("name").notNull(),description:(0,g.Qq)("description"),dayOfWeek:(0,i.nd)("day_of_week").notNull(),startTime:(0,g.Qq)("start_time").notNull(),durationMinutes:(0,i.nd)("duration_minutes").default(60),coach:(0,g.Qq)("coach"),level:(0,g.Qq)("level"),programType:o("program_type"),maxCapacity:(0,i.nd)("max_capacity"),isActive:(0,k.zM)("is_active").default(!0),createdAt:(0,h.vE)("created_at").defaultNow(),updatedAt:(0,h.vE)("updated_at").defaultNow()}),t=(0,e.cJ)("attendance",{id:(0,f.uR)("id").defaultRandom().primaryKey(),memberId:(0,f.uR)("member_id").notNull().references(()=>r.id,{onDelete:"cascade"}),classId:(0,f.uR)("class_id").references(()=>s.id),className:(0,g.Qq)("class_name"),checkInTime:(0,h.vE)("check_in_time").defaultNow(),checkInMethod:(0,g.Qq)("check_in_method").default("manual"),createdAt:(0,h.vE)("created_at").defaultNow()}),u=(0,e.cJ)("payments",{id:(0,f.uR)("id").defaultRandom().primaryKey(),memberId:(0,f.uR)("member_id").notNull().references(()=>r.id,{onDelete:"cascade"}),amount:(0,i.nd)("amount").notNull(),currency:(0,g.Qq)("currency").default("AUD"),status:p("status").default("pending"),type:(0,g.Qq)("type"),description:(0,g.Qq)("description"),ezipayTransactionId:(0,g.Qq)("ezipay_transaction_id"),paymentDate:(0,h.vE)("payment_date").defaultNow(),createdAt:(0,h.vE)("created_at").defaultNow()}),v=(0,e.cJ)("automation_logs",{id:(0,f.uR)("id").defaultRandom().primaryKey(),type:(0,g.Qq)("type").notNull(),memberId:(0,f.uR)("member_id").references(()=>r.id,{onDelete:"set null"}),status:(0,g.Qq)("status").default("pending"),message:(0,g.Qq)("message"),sentAt:(0,h.vE)("sent_at"),createdAt:(0,h.vE)("created_at").defaultNow()}),w=(0,e.cJ)("member_notes",{id:(0,f.uR)("id").defaultRandom().primaryKey(),memberId:(0,f.uR)("member_id").notNull().references(()=>r.id,{onDelete:"cascade"}),authorId:(0,f.uR)("author_id").references(()=>q.id),content:(0,g.Qq)("content").notNull(),type:(0,g.Qq)("type").default("note"),createdAt:(0,h.vE)("created_at").defaultNow()}),x=(0,e.cJ)("settings",{id:(0,f.uR)("id").defaultRandom().primaryKey(),key:(0,g.Qq)("key").notNull().unique(),value:(0,j.Pq)("value"),updatedAt:(0,h.vE)("updated_at").defaultNow()}),y=(0,l.K1)(r,({many:a})=>({attendance:a(t),payments:a(u),notes:a(w)})),z=(0,l.K1)(t,({one:a})=>({member:a(r,{fields:[t.memberId],references:[r.id]}),class:a(s,{fields:[t.classId],references:[s.id]})})),A=(0,l.K1)(u,({one:a})=>({member:a(r,{fields:[u.memberId],references:[r.id]})})),B=(0,l.K1)(w,({one:a})=>({member:a(r,{fields:[w.memberId],references:[r.id]}),author:a(q,{fields:[w.authorId],references:[q.id]})}))},47990:()=>{},49331:(a,b,c)=>{Promise.resolve().then(c.bind(c,13580))},63745:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},66147:(a,b,c)=>{"use strict";c.d(b,{Y9:()=>k,j2:()=>l});var d=c(89353),e=c(99306),f=c(87082),g=c.n(f),h=c(91132),i=c(36993),j=c(48689);let{handlers:k,auth:l,signIn:m,signOut:n}=(0,d.Ay)({providers:[(0,e.A)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(a){if(!a?.email||!a?.password)return null;try{let[b]=await h.db.select().from(i.users).where((0,j.eq)(i.users.email,a.email)).limit(1);if(!b||!b.passwordHash||!await g().compare(a.password,b.passwordHash))return null;return{id:b.id,email:b.email,name:b.name,role:b.role??void 0}}catch(a){return console.error("Auth error:",a),null}}})],pages:{signIn:"/login"},callbacks:{jwt:async({token:a,user:b})=>(b&&(a.role=b.role,a.id=b.id),a),session:async({session:a,token:b})=>(a.user&&(a.user.role=b.role,a.user.id=b.id),a)},session:{strategy:"jwt"},trustHost:!0})},82704:()=>{},86457:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h});var d=c(75338),e=c(82161),f=c(66147),g=c(29125);async function h({children:a}){let b=await (0,f.j2)();return b||(0,e.redirect)("/login"),(0,d.jsxs)("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,d.jsx)(g.default,{user:b.user}),(0,d.jsx)("main",{className:"flex-1 overflow-auto",children:a})]})}},88531:()=>{},91132:(a,b,c)=>{"use strict";c.d(b,{db:()=>g});var d=c(84065),e=c(10882),f=c(36993);let g=(0,e.fd)(d.ll,{schema:f})}};