(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{933:(e,t,a)=>{"use strict";a.d(t,{default:()=>f});var s=a(5155),n=a(2115),l=a(6485),r=a(1169),i=a(8519),c=a(6983),o=a(1847);let d=(0,o.A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var h=a(2348),m=a(5917),p=a(5229);let u=(0,o.A)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),x=(0,o.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var y=a(8085);let v=[{icon:l.A,label:"Move a class",prompt:"I want to reschedule a class"},{icon:r.A,label:"Find a member",prompt:"Look up member information for"},{icon:i.A,label:"Check payments",prompt:"Show me overdue payments"},{icon:c.A,label:"Today's schedule",prompt:"What's on the schedule today?"}];function f(){let[e,t]=(0,n.useState)([{id:"1",role:"assistant",content:"Hi! I'm your Flow State AI assistant. I can help you manage the gym - update schedules, look up members, handle payments, and more. What would you like to do?",timestamp:new Date}]),[a,l]=(0,n.useState)(""),[r,i]=(0,n.useState)(!1),[c,o]=(0,n.useState)(!1),f=(0,n.useRef)(null),k=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null==(e=f.current)||e.scrollIntoView({behavior:"smooth"})},[e]),(0,n.useEffect)(()=>{"webkitSpeechRecognition"in window&&(k.current=new window.webkitSpeechRecognition,k.current.continuous=!1,k.current.interimResults=!1,k.current.lang="en-AU",k.current.onresult=e=>{l(e.results[0][0].transcript),o(!1)},k.current.onerror=()=>{o(!1)},k.current.onend=()=>{o(!1)})},[]);let w=async s=>{let n=s||a.trim();if(!n||r)return;let c={id:"user-".concat(Date.now()),role:"user",content:n,timestamp:new Date};t(e=>[...e,c]),l(""),i(!0);try{let a=await fetch("/api/assistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,history:e.slice(-10)})}),s=await a.json(),l={id:"assistant-".concat(Date.now()),role:"assistant",content:s.response,timestamp:new Date,action:s.action};t(e=>[...e,l])}catch(a){let e={id:"error-".concat(Date.now()),role:"assistant",content:"Sorry, I couldn't process that request. Please try again.",timestamp:new Date};t(t=>[...t,e])}i(!1)},b=async(a,s)=>{if(t(e=>e.map(e=>e.id===a&&e.action?{...e,action:{...e.action,pending:!0}}:e)),s){let s=e.find(e=>e.id===a);if(null==s?void 0:s.action)try{await fetch("/api/assistant/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.action)});let e={id:"success-".concat(Date.now()),role:"assistant",content:"✅ Done! The action has been completed.",timestamp:new Date};t(t=>[...t,e])}catch(a){let e={id:"error-".concat(Date.now()),role:"assistant",content:"❌ Sorry, there was an error executing that action.",timestamp:new Date};t(t=>[...t,e])}}else{let e={id:"cancel-".concat(Date.now()),role:"assistant",content:"No problem, action cancelled. What else can I help with?",timestamp:new Date};t(t=>[...t,e])}t(e=>e.map(e=>e.id===a&&e.action?{...e,action:void 0}:e))};return(0,s.jsxs)("div",{className:"flex flex-col h-[calc(100vh-2rem)] p-4 lg:p-8",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-white shadow-lg",children:(0,s.jsx)(d,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"AI Assistant"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"Powered by Gemini"})]})]}),(0,s.jsxs)("div",{className:"flex-1 bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(e=>{var t;return(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-slate-100 text-slate-900"),children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),(null==(t=e.action)?void 0:t.type)==="confirmation"&&(0,s.jsx)("div",{className:"mt-3 flex gap-2",children:e.action.pending?(0,s.jsxs)("div",{className:"flex items-center text-slate-500",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 animate-spin mr-2"}),"Processing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>b(e.id,!0),className:"flex items-center px-3 py-1.5 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"Confirm"]}),(0,s.jsxs)("button",{onClick:()=>b(e.id,!1),className:"flex items-center px-3 py-1.5 bg-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-300 transition-colors",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})}),(0,s.jsx)("p",{className:"text-xs opacity-50 mt-2",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)}),r&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsxs)("div",{className:"bg-slate-100 rounded-2xl px-4 py-3 flex items-center",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 animate-spin text-slate-500"}),(0,s.jsx)("span",{className:"ml-2 text-slate-500",children:"Thinking..."})]})}),(0,s.jsx)("div",{ref:f})]}),e.length<=2&&(0,s.jsxs)("div",{className:"px-4 pb-4",children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-2",children:"Quick actions:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e.prompt),className:"flex items-center px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-xl text-sm text-slate-700 transition-colors",children:[(0,s.jsx)(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.label))})]}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>{var e,t;c?null==(e=k.current)||e.stop():(null==(t=k.current)||t.start(),o(!0))},className:"p-3 rounded-xl transition-colors ".concat(c?"bg-red-500 text-white animate-pulse":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:c?(0,s.jsx)(u,{className:"w-5 h-5"}):(0,s.jsx)(x,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&w(),placeholder:c?"Listening...":"Type a message or use voice...",className:"flex-1 px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",disabled:c}),(0,s.jsx)("button",{onClick:()=>w(),disabled:!a.trim()||r,className:"p-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50",children:(0,s.jsx)(y.A,{className:"w-5 h-5"})})]})})]})]})}},1042:(e,t,a)=>{Promise.resolve().then(a.bind(a,933))},1169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1847:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(2115);let n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:h,...m}=e;return(0,s.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:a,strokeWidth:c?24*Number(i)/Number(r):i,className:n("lucide",o),...m},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:i,...c}=a;return(0,s.createElement)(r,{ref:l,iconNode:t,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),i),...c})});return a.displayName="".concat(e),a}},2348:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},5229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5917:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6485:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6983:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8085:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},8519:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])}},e=>{e.O(0,[441,493,358],()=>e(e.s=1042)),_N_E=e.O()}]);