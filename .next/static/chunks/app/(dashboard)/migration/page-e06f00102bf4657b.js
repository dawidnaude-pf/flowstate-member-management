(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{997:(e,t,s)=>{Promise.resolve().then(s.bind(s,8341))},1169:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1786:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},1847:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var l=s(2115);let a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,l.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:n,className:c="",children:o,iconNode:m,...x}=e;return(0,l.createElement)("svg",{ref:t,...r,width:i,height:i,stroke:s,strokeWidth:n?24*Number(d)/Number(i):d,className:a("lucide",c),...x},[...m.map(e=>{let[t,s]=e;return(0,l.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let s=(0,l.forwardRef)((s,r)=>{let{className:d,...n}=s;return(0,l.createElement)(i,{ref:r,iconNode:t,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),d),...n})});return s.displayName="".concat(e),s}},2348:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1847).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},2529:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2987:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5229:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8341:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var l=s(5155),a=s(2115),r=s(2529),i=s(1786),d=s(1847);let n=(0,d.A)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var c=s(5229),o=s(2987);let m=(0,d.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var x=s(2348),h=s(1169);function p(){let[e,t]=(0,a.useState)("upload"),[s,d]=(0,a.useState)(null),[p,u]=(0,a.useState)([]),[b,f]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),[N,v]=(0,a.useState)(0),[g,k]=(0,a.useState)({success:0,failed:0,errors:[]}),w=(0,a.useRef)(null),C=[{key:"firstName",label:"First Name",required:!0},{key:"lastName",label:"Last Name",required:!0},{key:"email",label:"Email",required:!1},{key:"phone",label:"Phone",required:!1},{key:"beltRank",label:"Belt Rank",required:!1},{key:"joinDate",label:"Join Date",required:!1},{key:"status",label:"Status",required:!1},{key:"subscriptionPlan",label:"Subscription Plan",required:!1},{key:"clubworxId",label:"Clubworx ID",required:!1},{key:"notes",label:"Notes",required:!1}],A=async()=>{t("importing"),v(0);let e={success:0,failed:0,errors:[]};for(let t=0;t<p.length;t++){let s=p[t],l={};j.forEach(e=>{e.source&&s[e.source]&&(l[e.target]=s[e.source])});try{(await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?e.success++:(e.failed++,e.errors.push("Row ".concat(t+2,": ").concat(l.firstName||"Unknown"," - Import failed")))}catch(s){e.failed++,e.errors.push("Row ".concat(t+2,": Network error"))}v(Math.round((t+1)/p.length*100))}k(e),t("complete")};return(0,l.jsxs)("div",{className:"p-4 lg:p-8 max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900",children:"Clubworx Migration"}),(0,l.jsx)("p",{className:"text-slate-500 mt-1",children:"Import your members and data from Clubworx"})]}),(0,l.jsx)("div",{className:"flex items-center mb-8",children:["Upload","Map Fields","Preview","Complete"].map((t,s)=>{let a=["upload","mapping","preview","complete"].indexOf("importing"===e?"preview":e),i=s<a,d=s===a;return(0,l.jsxs)("div",{className:"flex items-center flex-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold ".concat(i?"bg-green-500 text-white":d?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"),children:i?(0,l.jsx)(r.A,{className:"w-5 h-5"}):s+1}),(0,l.jsx)("span",{className:"ml-2 text-sm font-medium hidden md:block ".concat(d?"text-slate-900":"text-slate-500"),children:t}),s<3&&(0,l.jsx)("div",{className:"flex-1 h-0.5 bg-slate-200 mx-4"})]},t)})}),(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:["upload"===e&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsxs)("div",{onClick:()=>{var e;return null==(e=w.current)?void 0:e.click()},className:"border-2 border-dashed border-slate-300 rounded-2xl p-12 cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[(0,l.jsx)(i.A,{className:"w-12 h-12 mx-auto text-slate-400 mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Upload Clubworx Export"}),(0,l.jsx)("p",{className:"text-slate-500 mb-4",children:"Export your members from Clubworx as CSV and upload here"}),(0,l.jsxs)("span",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[(0,l.jsx)(n,{className:"w-4 h-4 mr-2"}),"Select CSV File"]})]}),(0,l.jsx)("input",{ref:w,type:"file",accept:".csv",onChange:e=>{var s;let l=null==(s=e.target.files)?void 0:s[0];if(!l)return;d(l);let a=new FileReader;a.onload=e=>{var s;let l=(null==(s=e.target)?void 0:s.result).split("\n").filter(e=>e.trim()),a=l[0].split(",").map(e=>e.trim().replace(/"/g,"")),r=l.slice(1).map(e=>{let t=e.split(",").map(e=>e.trim().replace(/"/g,"")),s={};return a.forEach((e,l)=>{s[e]=t[l]||""}),s});f(a),u(r),y(C.map(e=>{var t;let s=a.find(t=>t.toLowerCase().includes(e.key.toLowerCase())||e.key.toLowerCase().includes(t.toLowerCase().replace(/[^a-z]/g,"")));return{source:s||"",target:e.key,sampleData:s?null==(t=r[0])?void 0:t[s]:void 0}})),t("mapping")},a.readAsText(l)},className:"hidden"}),(0,l.jsxs)("div",{className:"mt-8 text-left bg-slate-50 rounded-xl p-6",children:[(0,l.jsx)("h4",{className:"font-bold text-slate-900 mb-3",children:"How to export from Clubworx:"}),(0,l.jsxs)("ol",{className:"text-sm text-slate-600 space-y-2",children:[(0,l.jsx)("li",{children:"1. Log in to Clubworx admin panel"}),(0,l.jsx)("li",{children:"2. Go to Members â†’ All Members"}),(0,l.jsx)("li",{children:'3. Click "Export" and select CSV format'}),(0,l.jsx)("li",{children:"4. Include all fields (name, email, phone, membership, etc.)"}),(0,l.jsx)("li",{children:"5. Upload the downloaded file here"})]})]})]}),"mapping"===e&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"Map Fields"}),(0,l.jsxs)("p",{className:"text-sm text-slate-500",children:[p.length," records found in ",null==s?void 0:s.name]})]}),(0,l.jsx)("button",{onClick:()=>t("upload"),className:"text-slate-500 hover:text-slate-700",children:(0,l.jsx)(c.A,{className:"w-5 h-5"})})]}),(0,l.jsx)("div",{className:"space-y-3 mb-6",children:j.map(e=>{let t=C.find(t=>t.key===e.target);return(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-40",children:(0,l.jsxs)("span",{className:"text-sm font-medium text-slate-700",children:[null==t?void 0:t.label,(null==t?void 0:t.required)&&(0,l.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,l.jsx)(o.A,{className:"w-4 h-4 text-slate-300"}),(0,l.jsxs)("select",{value:e.source,onChange:t=>{var s,l;return s=e.target,l=t.target.value,void y(e=>e.map(e=>{if(e.target===s){var t;return{...e,source:l,sampleData:null==(t=p[0])?void 0:t[l]}}return e}))},className:"flex-1 p-2 border border-slate-200 rounded-lg",children:[(0,l.jsx)("option",{value:"",children:"-- Select column --"}),b.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),e.sampleData&&(0,l.jsxs)("span",{className:"text-xs text-slate-400 w-32 truncate",children:["e.g. ",e.sampleData]})]},e.target)})}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>t("upload"),className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Back"}),(0,l.jsx)("button",{onClick:()=>t("preview"),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Preview Import"})]})]}),"preview"===e&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Preview Import"}),(0,l.jsxs)("p",{className:"text-slate-500 mb-6",children:["Review the first 5 records before importing all ",p.length," members."]}),(0,l.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{className:"bg-slate-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Name"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Email"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Phone"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Belt"})]})}),(0,l.jsx)("tbody",{children:p.slice(0,5).map((e,t)=>{var s,a,r,i,d;let n=e[(null==(s=j.find(e=>"firstName"===e.target))?void 0:s.source)||""]||"",c=e[(null==(a=j.find(e=>"lastName"===e.target))?void 0:a.source)||""]||"",o=e[(null==(r=j.find(e=>"email"===e.target))?void 0:r.source)||""]||"",m=e[(null==(i=j.find(e=>"phone"===e.target))?void 0:i.source)||""]||"",x=e[(null==(d=j.find(e=>"beltRank"===e.target))?void 0:d.source)||""]||"";return(0,l.jsxs)("tr",{className:"border-b border-slate-100",children:[(0,l.jsxs)("td",{className:"px-3 py-2",children:[n," ",c]}),(0,l.jsx)("td",{className:"px-3 py-2",children:o}),(0,l.jsx)("td",{className:"px-3 py-2",children:m}),(0,l.jsx)("td",{className:"px-3 py-2",children:x})]},t)})})]})}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>t("mapping"),className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Back"}),(0,l.jsxs)("button",{onClick:A,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center",children:[(0,l.jsx)(m,{className:"w-4 h-4 mr-2"}),"Import ",p.length," Members"]})]})]}),"importing"===e&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(x.A,{className:"w-12 h-12 mx-auto animate-spin text-blue-600 mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Importing Members..."}),(0,l.jsx)("p",{className:"text-slate-500 mb-4",children:"Please don't close this page"}),(0,l.jsx)("div",{className:"w-full max-w-md mx-auto bg-slate-200 rounded-full h-3",children:(0,l.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:"".concat(N,"%")}})}),(0,l.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:[N,"% complete"]})]}),"complete"===e&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(r.A,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),(0,l.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Import Complete!"}),(0,l.jsxs)("div",{className:"flex justify-center gap-8 my-6",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-3xl font-bold text-green-600",children:g.success}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Imported"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-3xl font-bold text-red-600",children:g.failed}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Failed"})]})]}),g.errors.length>0&&(0,l.jsxs)("div",{className:"text-left bg-red-50 rounded-xl p-4 mb-6 max-h-40 overflow-y-auto",children:[(0,l.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"Errors:"}),g.errors.map((e,t)=>(0,l.jsx)("p",{className:"text-sm text-red-600",children:e},t))]}),(0,l.jsxs)("a",{href:"/members",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:[(0,l.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"View Members"]})]})]})]})}}},e=>{e.O(0,[441,493,358],()=>e(e.s=997)),_N_E=e.O()}]);